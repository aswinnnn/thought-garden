<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="create/style.css">
  <script src="../assets/htmx.min.js"></script>
  <script>
    function csshome() {

      const boxes = document.querySelectorAll('.post-bg');
      boxes.forEach(box => {
        let url = box.getAttribute('data-src');
        let cssraw = [];
        if (url) {
          // box.style.backgroundImage = `url(${url})`;
          const cssRule = `
                        .post-bg[data-src="${url}"] {
                            background-image: 
                                linear-gradient(to bottom, rgba(255, 255, 255, 0.158), rgba(0, 0, 0, 0.388)), 
                                url(${url});
                        }
                        .post-bg[data-src="${url}"]:hover {
                            background-image: 
                                linear-gradient(to bottom, rgba(255, 255, 255, 0.158), rgba(0, 0, 0, 0.388)), 
                                url(${url}), 
                                linear-gradient(to top, rgba(255, 255, 255, 0.112), rgba(0, 0, 0, 0.338)), 
                                url(${url});
                        }
                    `;
          cssraw.push(cssRule);
        }
        let cssp = cssraw.join('\n');
        const style = document.createElement('style');
        style.type = 'text/css';
        style.appendChild(document.createTextNode(cssp));
        document.head.appendChild(style);
      });
    };

    function changecontent() {
      let m = document.querySelector('.main-content');
      if (m) {
        let at = m.getAttribute('data-content');
        if (at == "create") {
          m.setAttribute('data-content', 'home')
        } else {
          m.setAttribute('data-content', 'create')
        }
      }
    }
    function mode() {
      let body = document.getElementById("body");
      let butt = document.getElementById("butt");
      if (body.className.match("dark")) {
        body.className = "light"
        butt.innerHTML = "🌙"
      }
      else {
        body.className = "dark"
        butt.innerHTML = "🌞"
      }
    }
  </script>
</head>

<body class="light" id="body">
  <div class="switch">
    <input name="switch" id="one" type="radio" hx-get="/api/home" hx-trigger="click" hx-target=".main-content"
      hx-swap="innerHTML" onclick="changecontent();setTimeout(csshome, 500);" tabindex="0" />
    <label for="one" class="switch__label"> 🏡</label>
    <input name="switch" id="two" type="radio" hx-get="/api/create" hx-trigger="click" hx-target=".main-content"
      hx-swap="innerHTML" onclick="changecontent();" tabindex="1" checked />
    <label for="two" class="switch__label">🌻</label>
    <!-- <input name="switch" id="three" type="radio" />
      <label for="three" class="switch__label">?</label> -->
    <div class="switch__indicator" />
  </div>
  </div>
  <button class="top-right-button" onClick="mode()" id="butt">🌙</button>
  <main class="main-content" data-content="create">
    <br style="opacity: 0;">
    <article class="article">
      <h4 class="date">Friday, May 3, 2024</h4>
      <h2 class="article-title" contenteditable="true" data-ph="your title for the day"></h2>
      <hr class="hbar">
      <p class="article-content" contenteditable="true" data-ph="your content goes here" data-height="100vh"></p>
    </article>

  </main>

</body>

</html>